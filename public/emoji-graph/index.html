<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Graph</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
    </style>
<!-- Matomo, a fingerprintless, GDPR compliant, no-cookies analytics -->
<script>
  var _paq = window._paq = window._paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//analytics.monogon.net/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
</head>
<body>
    <div id="3d-graph" style="width: 100vw; height: 100vh;"></div>

    <script src="/js/three-r128.min.js"></script>
    <script src="/js/3d-force-graph.min.js"></script>
    <script src="/js/three-spritetext.min.js"></script>
    <script>
        // emojis are from https://emojicombos.com/
        const graphData = {
            nodes: [
                { id: 'sun', emoji: 'â˜€ï¸' },
                { id: 'seed', emoji: 'ðŸŒ°' },
                { id: 'seedling', emoji: 'ðŸŒ±' },
                { id: 'tree', emoji: 'ðŸŒ³' },
                { id: 'jungle', emoji: 'ðŸŒ´' },
                { id: 'leaves', emoji: 'ðŸƒ' },
                { id: 'water', emoji: 'ðŸ’§' },
                { id: 'fire', emoji: 'ðŸ”¥' },
                { id: 'dinosaur', emoji: 'ðŸ¦•' },
                { id: 'cloud', emoji: 'â˜ï¸' },
                { id: 'air', emoji: 'ðŸ’¨' },
                { id: 'earth', emoji: 'ðŸŒ' },
                { id: 'lake', emoji: 'ðŸžï¸' },
                { id: 'ocean', emoji: 'ðŸŒŠ' },
                { id: 'apple', emoji: 'ðŸŽ' },
                { id: 'farmer', emoji: 'ðŸ‘©â€ðŸŒ¾' },
                { id: 'bread', emoji: 'ðŸž' },
                { id: 'cheese', emoji: 'ðŸ§€' },
                { id: 'milk', emoji: 'ðŸ¥›' },
                { id: 'bear', emoji: 'ðŸ»' },
                { id: 'cow', emoji: 'ðŸ„' },
                { id: 'monkey', emoji: 'ðŸ’' },
                { id: 'poo', emoji: 'ðŸ’©' },
                { id: 'bird', emoji: 'ðŸ¦' },
                { id: 'bug', emoji: 'ðŸž' },
                { id: 'fish', emoji: 'ðŸŸ' },
                { id: 'shark', emoji: 'ðŸ¦ˆ' },
                { id: 'bee', emoji: 'ðŸ' },
                { id: 'honey', emoji: 'ðŸ¯' },
                { id: 'mushroom', emoji: 'ðŸ„' },
                { id: 'banana', emoji: 'ðŸŒ' },
                { id: 'egg', emoji: 'ðŸ¥š' },
                { id: 'wheat', emoji: 'ðŸŒ¾' },
                { id: 'flower', emoji: 'ðŸŒ¸' },
                { id: 'collision', emoji: 'ðŸ’¥' },
                { id: 'sweat_droplets', emoji: 'ðŸ’¦' },
                { id: 'hole', emoji: 'ðŸ•³ï¸' },
                { id: 'ice_cube', emoji: 'ðŸ§Š' },
                { id: 'ringed_planet', emoji: 'ðŸª' },
                { id: 'star', emoji: 'â­' },
                { id: 'milky_way', emoji: 'ðŸŒŒ' },
                { id: 'fog', emoji: 'ðŸŒ«ï¸' },
                { id: 'high_voltage', emoji: 'âš¡' },
                { id: 'comet', emoji: 'â˜„ï¸' },
                { id: 'snowflake', emoji: 'â„ï¸' },
                { id: 'sparkles', emoji: 'âœ¨' },
                { id: 'knot', emoji: 'ðŸª¢' },
                { id: 'gem_stone', emoji: 'ðŸ’Ž' },
                { id: 'link', emoji: 'ðŸ”—' },
                { id: 'magnet', emoji: 'ðŸ§²' },
                { id: 'light_bulb', emoji: 'ðŸ’¡' },
                { id: 'dna', emoji: 'ðŸ§¬' },
                { id: 'microbe', emoji: 'ðŸ¦ ' },
                { id: 'wavy_dash', emoji: 'ã€°ï¸' },                
                { id: 'iron', emoji: 'ðŸ”©' },
                
                
            ],
            links: [
                { source: 'sparkles', target: 'seedling', type: 'nourishes' },
                { source: 'water', target: 'seedling', type: 'feeds' },
                { source: 'cloud', target: 'water', type: 'produces' },
                { source: 'bird', target: 'air', type: 'flies_in' },
                { source: 'bird', target: 'bread', type: 'eats' },
                { source: 'bird', target: 'egg', type: 'lays' },
                { source: 'cloud', target: 'air', type: 'floats_in' },
                { source: 'sun', target: 'water', type: 'evaporates' },
                { source: 'water', target: 'lake', type: 'lives_in' },
                { source: 'water', target: 'ocean', type: 'lives_in' },
                { source: 'fish', target: 'lake', type: 'swims_in' },
                { source: 'fish', target: 'ocean', type: 'swims_in' },
                { source: 'shark', target: 'fish', type: 'eats' },
                { source: 'shark', target: 'ocean', type: 'lives_in' },
                { source: 'seed', target: 'seedling', type: 'grows' },
                { source: 'tree', target: 'seed', type: 'produces' },
                { source: 'seedling', target: 'tree', type: 'produces' },
                { source: 'seedling', target: 'flower', type: 'produces' },
                { source: 'bee', target: 'flower', type: 'pollinates' },
                { source: 'bee', target: 'honey', type: 'makes' },
                { source: 'bug', target: 'leaves', type: 'bug' },
                { source: 'tree', target: 'leaves', type: 'has' },
                { source: 'farmer', target: 'apple', type: 'harvests' },
                { source: 'fire', target: 'bread', type: 'bakes' },
                { source: 'milk', target: 'cheese', type: 'makes' },
                { source: 'earth', target: 'farmer', type: 'supports' },
                { source: 'seedling', target: 'wheat', type: 'provides' },
                { source: 'wheat', target: 'bread', type: 'provides' },
                { source: 'apple', target: 'farmer', type: 'picked_by' },
                { source: 'cow', target: 'milk', type: 'produces' },
                { source: 'milk', target: 'cheese', type: 'produces' },
                { source: 'cow', target: 'seedling', type: 'eats' },
                { source: 'cow', target: 'water', type: 'drinks' },
                { source: 'cow', target: 'earth', type: 'stands_on' },
                { source: 'cow', target: 'poo', type: 'poos' },
                { source: 'poo', target: 'seedling', type: 'grows' },
                { source: 'bear', target: 'honey', type: 'eats' },
                { source: 'bear', target: 'fish', type: 'eats' },
                { source: 'bear', target: 'tree', type: 'lives_in' },
                { source: 'microbe', target: 'dna', type: 'has' },
                { source: 'cow', target: 'dna', type: 'has' },
                { source: 'seedling', target: 'dna', type: 'has' },
                { source: 'farmer', target: 'dna', type: 'has' },                
                { source: 'poo', target: 'microbe', type: 'has' },
                { source: 'apple', target: 'tree', type: 'falls_from' },
                { source: 'sun', target: 'milky_way', type: 'orbits' }, 
                { source: 'sun', target: 'ringed_planet', type: 'orbits' },
                { source: 'star', target: 'milky_way', type: 'orbits' },
                { source: 'snowflake', target: 'water', type: 'melts' },
                { source: 'snowflake', target: 'cloud', type: 'comes from' },
                { source: 'snowflake', target: 'ice_cube', type: 'is' },
                { source: 'high_voltage', target: 'cloud', type: 'strikes' },
                { source: 'milky_way', target: 'hole', type: 'has' },
                { source: 'sparkles', target: 'magnet', type: 'is' },
                { source: 'sparkles', target: 'high_voltage', type: 'is' },
                { source: 'earth', target: 'magnet', type: 'is' },
                { source: 'comet', target: 'earth', type: 'hits' },
                { source: 'sun', target: 'sparkles', type: 'shines' },
                { source: 'monkey', target: 'poo', type: 'throws' },
                { source: 'bear', target: 'poo', type: 'shits' },
                { source: 'mushroom', target: 'poo', type: 'decomposes' },
                { source: 'banana', target: 'monkey', type: 'eats' },
                { source: 'monkey', target: 'jungle', type: 'lives_in' },
                // comets are made of ice, fire requires air
                { source: 'comet', target: 'ice_cube', type: 'is' },
                { source: 'fire', target: 'air', type: 'requires' },
                { source: 'fire', target: 'sparkles', type: 'creates' },
                // stars make sparkles, stars are in the milky way
                { source: 'star', target: 'sparkles', type: 'makes' },
                { source: 'light_bulb', target: 'sparkles', type: 'makes' },
                { source: 'high_voltage', target: 'light_bulb', type: 'powers' },
                { source: 'star', target: 'milky_way', type: 'is' },
                
            ]   
            };

        // Create the 3D force-directed graph
        const Graph = ForceGraph3D()
            (document.getElementById('3d-graph'))
            .graphData(graphData)
            .nodeThreeObject(node => {
                const sprite = new SpriteText(node.emoji);
                sprite.material.depthWrite = false; // make sprite background transparent
                sprite.textHeight = 8;
                return sprite;
            })
            .linkWidth(0.2)
            .linkOpacity(0.5)
            .linkDirectionalParticles(2)
            .linkDirectionalParticleWidth(1.5)
            .linkDirectionalParticleSpeed(0.005)
            .onNodeDragEnd(node => {
                node.fx = node.x;
                node.fy = node.y;
                node.fz = node.z;
            })
            .onNodeClick(node => {
                // Center view on clicked node
                Graph.cameraPosition(
                    { x: node.x, y: node.y, z: node.z },
                    node,
                    3000
                );
            })
            // make the label be the from the emojiNames array
            .nodeLabel(node => node.id)
            // change the look of the link directional particles to be emojis, not the color
            // .linkDirectionalParticles([() => 'ðŸŒŸ']);
            console.log(Graph.linkDirectionalParticles)
            
    </script>
</body>
</html>